<div class="grid">
    <div class="imagecontainer">
        <img src="https://droughtmonitor.unl.edu/data/png/current/current_mt_none.png" alt="Drought" onclick="showFullScreen(this.src)">
        <div class="imagetitle">MT Drought</div>
    </div>
    <div class="imagecontainer">
        <img src="https://radar.weather.gov/ridge/standard/KMSX_loop.gif" alt="Radar" onclick="showFullScreen(this.src)">
        <div class="imagetitle">MT RADAR</div>
    </div>
    <div class="imagecontainer">
        <img src="https://www.wpc.ncep.noaa.gov/noaa/noaa.gif" alt="Forecast" onclick="showFullScreen(this.src)">
        <div class="imagetitle">Forecast</div>
    </div>
</div>
<div class="grid">
    <div class="imagecontainer">
        <iframe 
            src="https://embed.windy.com/embed2.html?lat=45&lon=-110&zoom=4&layer=snow&model=ecmwf&menu=L&menuBar=topbar&metricWind=km%2Fh&pressure=&rh=&temp=&dens=&waveHeight=&wavePeriod=swell&waveDirection=&swellHeight=&swellPeriod=&swellDirection=&rain=false&snow=true&clouds=&precipitation=&basic=true&stormReports=false&geolines=false&locations=false&dx=0.5&dy=0.5&dt=12&menuIconVisibility=menu&timeBarColor=purple&timeBarOpacity=0.4&timeLabels=values&timeLabelFontSize=3.2&timeLabelColor=white&timeLabelOutlineColor=black&timeZone=UTC&now=2025-10-01T21:29&level=surface&overlay=wind&metricPrecip=inch%2Fh"
            style="width: 100%; height: 100%; border: none; border-radius: 8px; min-height: 35vh;"
            title="ECMWF Snow Precip Forecast: Colorado to BC"
            onclick="showFullScreen('https://www.windy.com/?snow,45,-110,4,m:ecmwf');">
        </iframe>
        <div class="imagetitle">Snow Precip Forecast</div>
    </div>
    <div class="imagecontainer">
        <img src="https://cdn.star.nesdis.noaa.gov/GOES18/ABI/SECTOR/wus/GEOCOLOR/GOES18-WUS-GEOCOLOR-1000x1000.gif" alt="GOES WUS" onclick="showFullScreen(this.src)">
        <div class="imagetitle">GOES WUS</div>
    </div>
    <div class="imagecontainer">
        <img src="https://radar.weather.gov/ridge/standard/KBLX_loop.gif" alt="Billings Radar" onclick="showFullScreen(this.src)">
        <div class="imagetitle">MT RADAR</div>
    </div>
</div>
<div id="clock">
    <span id="date"></span> &nbsp; <span id="utc"></span> &nbsp; <span id="local"></span>
</div>
<div id="buttons">
    <button onclick="window.open('https://wcc.sc.egov.usda.gov/nwcc/site?sitenum=385')">Carrot Basin</button>
    <button onclick="window.open('https://wcc.sc.egov.usda.gov/nwcc/site?sitenum=760&state=mt')">Skalkaho</button>
    <button onclick="window.open('https://wcc.sc.egov.usda.gov/nwcc/site?sitenum=667')">Seeley</button>
    <button onclick="window.open('https://wcc.sc.egov.usda.gov/nwcc/site?sitenum=860')">Island Park</button>
    <button onclick="window.open('https://www.bigskyresort.com/current-conditions/webcams')">Big Sky Cams</button>
    <button onclick="window.open('https://www.avalanche.org')">Avalanche Bulletins</button>
</div>
<style>
    body { background: black; color: white; font-family: monospace; text-align: center; margin: 0; padding: 0; height: 100vh; overflow: hidden; }
    .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px; width: 100vw; }
    .grid:first-child { height: 45vh; }
    .grid:last-child { height: 45vh; }
    .imagecontainer { position: relative; width: 100%; margin: 0; padding: 0; min-height: 40vh; background: #333; border: 1px solid #555; display: flex; flex-direction: column; justify-content: center; }
    img { width: 100%; max-width: 100%; max-height: 35vh; object-fit: contain; display: block; margin: auto; cursor: pointer; }
    .imagetitle { position: absolute; top: 5%; left: 50%; transform: translateX(-50%); background: black; padding: 3px; font-size: 1rem; white-space: nowrap; z-index: 10; }
    .error { color: red; font-size: 0.9rem; padding: 5px; text-align: center; }
    #clock { position: fixed; bottom: 0; left: 0; right: 0; background: darkslategray; padding: 5px; height: 5vh; display: flex; align-items: center; justify-content: center; }
    #date { font-size: 1rem; color: white; }
    #utc { font-size: 1.2rem; color: yellow; }
    #local { font-size: 1rem; color: lightsalmon; }
    #buttons { position: fixed; bottom: 5vh; left: 0; right: 0; background: darkslategray; padding: 5px; height: 5vh; display: flex; align-items: center; justify-content: center; gap: 5px; overflow-x: auto; }
    button { font-size: 0.8rem; min-width: 80px; background: springgreen; border: none; color: black; padding: 5px; }
    @media (max-width: 600px) {
        .grid:first-child { height: 40vh; }
        .grid:last-child { height: 40vh; }
        .imagecontainer { min-height: 30vh; }
        img, iframe { max-height: 25vh; }
        .imagetitle { font-size: 0.7rem; top: 2%; }
        #date, #local { font-size: 0.7rem; }
        #utc { font-size: 0.9rem; }
        button { font-size: 0.6rem; min-width: 60px; padding: 3px; }
        .grid { grid-template-columns: 1fr; width: 100%; gap: 1px; }
    }
    .fullscreen-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        z-index: 1000;
        justify-content: center;
        align-items: center;
    }
    .fullscreen-image {
        max-width: 90%;
        max-height: 90%;
    }
</style>
<script>
    function showTime() {
        const offset = -5; // UTC offset for CDT (-5 during DST as of Oct 1, 2025)
        const now = new Date();
        const utcTime = new Date(now.getTime() + offset * 3600000);
        const localTime = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: true });
        const utcStr = utcTime.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false });
        document.getElementById('date').innerText = now.toLocaleDateString('en-US', { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' });
        document.getElementById('utc').innerText = `UTC ${utcStr}`;
        document.getElementById('local').innerText = localTime;
        setTimeout(showTime, 1000);
    }
    window.onload = showTime;

    function showFullScreen(imageSrc) {
        const overlay = document.createElement('div');
        overlay.className = 'fullscreen-overlay';
        const img = document.createElement('img');
        img.className = 'fullscreen-image';
        img.src = imageSrc;
        img.onclick = () => document.body.removeChild(overlay); // Close on image click
        overlay.appendChild(img);
        document.body.appendChild(overlay);
        overlay.style.display = 'flex';
        overlay.onclick = (e) => {
            if (e.target === overlay) document.body.removeChild(overlay); // Close on overlay click
        };
    }
</script>